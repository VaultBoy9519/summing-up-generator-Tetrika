        const getDocumentHtml = (link) => {

          const docCreator = (html) => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");
            return doc;
          };

          try {
            return fetch(link)
              .then(response => {
                if (response.status == 403) {
                  console.log(`Ошибка 403`);
                  return fetch("https://tetrika-school.ru/go_back")
                    .then(() => {
                      console.log(`Повторный запрос`);
                      return fetch(link);
                    }).then(response => response.text())
                    .then(html => docCreator(html));
                }
                return response.text().then(html => docCreator(html));
              });
          } catch (error) {
            console.log(`Урок не найден`);
            return error;
          }
        };

getDocumentHtml("https://tetrika-school.ru/adminka/lessons/1c067df8-4dd3-4efa-91ff-e0229109b14f")
          .then(
            doc => {
              //Функция проходит по таблице урока и создает объект с нужными параметрами
              //который помещается в generalLessonInfo
              const createGeneralInfo = () => {
                if (doc.querySelector("table")) {
                  const table = doc.querySelector("table");
                  const rows = table.querySelectorAll(`tr`);
                  const obj = {};
                  for (let i = 0; i < rows.length; i++) {
                    const cells = rows[i].querySelectorAll("td");
                    const key = cells[0].textContent.trim();
                    if (key === "состояние" || key === "вводный урок" || key === "ставка урока" || key === "назначенное время") {
                      let value = cells[1].querySelector("dd").textContent.trim();
                      if (Number(value)) {
                        value = Number(value).toFixed();
                      }
                      obj[key] = value;
                    }
                  }
                  return obj;
                } else {
                  sendResponse(`404 Not Found`);
                  return;
                }
              };

              const generalLessonInfo = createGeneralInfo();


